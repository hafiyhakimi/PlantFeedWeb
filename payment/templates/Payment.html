<!doctype html>
<html lang="en">
  
<script src="static/js/country-states.js"></script>

<head>
    <style>
        .content {
          max-width: 500px;
          margin: auto;
          overflow-x: hidden;
          width: 200px;
                }
        table{
          border:4px solid black;
          margin: 0 auto;
          padding: 40px;
          width: fit-content;
            }

        img {
          max-width: 100%;
          height: auto;
          border: 1px solid #ddd;
          border-radius: 4px;
          padding: 5px;

          }
        .profileIcon{
          border-radius: 50%;

        }
        .m
        {
          margin-left:550px;
        }

        .account-form input
        {
              border: 2px solid #ccc; height: calc(2em + .75rem + 2px);
        }

        .form-control {
          border: 2px solid #ccc;
        }

        .account-form input:focus {
          border-color: #1497ff;
          box-shadow: inset 0 0px 0px rgba(0, 0, 0, 0.075), 0 0 0px rgba(255, 0, 0, 0.6);
        }
        
      </style>

</head>

<!-- Required meta tags -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">

<h1 class="p-3 mb-2 bg-success text-white text-center">iGROW Knowledge Management System</h1>

<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.3/js/bootstrap.min.js" integrity="sha384-a5N7Y/aK3qNeh15eJKGWxsqtnX/wWdSZSKp+81YjTmS15nvnvxKHuzaWwXHDli+4" crossorigin="anonymous"></script>

<b>
  <div>
    <ul class="nav nav-tabs justify-content-center" id="myTab" role="tablist" >
      <li class="nav-item" role="presentation">
        <a class="nav-link active" id="home-tab" data-bs-toggle="tab" href="{% url 'Home' %}" role="tab" aria-controls="home" aria-selected="true">Home</a>
      </li>
      <li class="nav-item" role="presentation">
        <a class="nav-link active" id="sharing-tab" data-bs-toggle="tab" href="{% url 'MainSharing' %}" role="tab" aria-controls="sharing" aria-selected="true">Sharing</a>
      </li>
      <li class="nav-item" role="presentation">
        <a class="nav-link active" id="discussion-tab" data-bs-toggle="tab" href="{% url 'MainGroup' %}" role="tab" aria-controls="discussion" aria-selected="true">Group</a>
      </li>
      <li class="nav-item" role="presentation">
       <a class="nav-link active" id="friends-tab" data-bs-toggle="tab" href="{% url 'MainMember' %}" role="tab" aria-controls="friends" aria-selected="true">Member</a>
      </li>
      <li class="nav-item" role="presentation">
        <a class="nav-link active" id="workshop-tab" data-bs-toggle="tab" href="{% url 'BookWorkshop' %}"role="tab" aria-controls="workshop" aria-selected="true">Workshop</a>
       </li>
       <li class="nav-item" role="presentation">
        <a class="nav-link active" id="profile-tab" data-bs-toggle="tab" href="{% url 'View' %}" role="tab" aria-controls="profile" aria-selected="true">Profile</a>
       </li>
    </ul>
  </div>
<br/>
{% block content %}
<div class="container-fluid">
  <div class="row no-gutter">
    <div class="col-md-12">
      <div class="login d-flex align-items-center py-5">
        <div class="container">
          <div class="row">
            <div id="payment-form" class="col-12 col-lg-6 mx-auto">
              <h3 class="mb-3">Billing address</h3>
              <!-- Error messages in this element -->
              <div id="card-errors" class="a" role="alert"></div>
              <form>
                <div class="row g-3">
                  <div class="col-sm-7">
                    <label for="fullName" class="form-label">Customer Name</label>
                    <input type="text" class="form-control" id="fullname" placeholder="" required>
                    <div class="invalid-feedback">
                      Valid first name is required.
                    </div>
                  </div>
                  <div class="col-12">
                    <label for="email" class="form-label">Email <span class="text-muted">(Optional)</span></label>
                    <input type="email" class="form-control" id="email" placeholder="you@example.com">
                    <div class="invalid-feedback">
                      Please enter a valid email address for shipping updates.
                    </div>
                  </div>
                  <div class="col-12">
                    <label for="address" class="form-label">Address</label>
                    <input type="text" class="form-control" id="address" placeholder="1234 Main St" required>
                    <div class="invalid-feedback">
                      Please enter your shipping address.
                    </div>
                  </div>
                  <div class="col-12">
                    <label for="address2" class="form-label">Address 2 <span
                        class="text-muted">(Optional)</span></label>
                    <input type="text" class="form-control" id="address2" placeholder="Apartment or suite">
                  </div>
                  <div class="col-md-5">
                    <label for="country" class="form-label">Country</label>
                    <select class="form-select" id="country" required>
                      <option value="">Choose...</option>
                      <option>United States</option>
                    </select>
                    <div class="invalid-feedback">
                      Please select a valid country.
                    </div>
                  </div>
                  <div class="col-md-4">
                    <label for="state" class="form-label">State</label>
                    <span id="state-code"><input type="text" id="state"></span>
                    </select>
                    <div class="invalid-feedback">
                      Please provide a valid state.
                    </div>
                  </div>
                  <div class="col-md-3">
                    <label for="Postcode" class="form-label">Postcode</label>
                    <input type="text" class="form-control" id="postcode" placeholder="" required>
                    <div class="invalid-feedback">
                      Zip code required.
                    </div>
                  </div>
                </div>
                <hr class="my-4">
                <h4 class="mb-3">Payment</h4>
                <label for="card-element">Credit or debit card</label>
                <div id="card-element" class="form-control form-control-payment">
                  <!-- Payment elements will appear here -->
                </div>
                <hr class="my-4">
                <button id="submit" class="btn btn-primary w-100 fw-bold" data-secret="{{ client_secret }}">Pay</button>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
</div>
  {% endblock %}

  {% block extrascripts %}
                  <script>
                  // user country code for selected option
                  let user_country_code = "";

                  (function () {

                      // Get the country name and state name from the imported script.
                      let country_list = country_and_states['country'];
                      let states_list = country_and_states['states'];

                      // creating country name drop-down
                      let option =  '';
                      option += '<option>select country</option>';
                      for(let country_code in country_list){
                          // set selected option user country
                          let selected = (country_code == user_country_code) ? ' selected' : '';
                          option += '<option value="'+country_code+'"'+selected+'>'+country_list[country_code]+'</option>';
                      }
                      document.getElementById('country').innerHTML = option;

                      // creating states name drop-down
                      let text_box = '<input type="text" class="input-text" id="state">';
                      let state_code_id = document.getElementById("state-code");

                      function create_states_dropdown() {
                          // get selected country code
                          let country_code = document.getElementById("country").value;
                          let states = states_list[country_code];
                          // invalid country code or no states add textbox
                          if(!states){
                              state_code_id.innerHTML = text_box;
                              return;
                          }
                          let option = '';
                          if (states.length > 0) {
                              option = '<select id="state">\n';
                              for (let i = 0; i < states.length; i++) {
                                  option += '<option value="'+states[i].code+'">'+states[i].name+'</option>';
                              }
                              option += '</select>';
                          } else {
                              // create input textbox if no states 
                              option = text_box
                          }
                          state_code_id.innerHTML = option;
                      }

                      // country select change event
                      const country_select = document.getElementById("country");
                      country_select.addEventListener('change', create_states_dropdown);

                      create_states_dropdown();
                  })();
                  </script>
                  {% endblock %}
</html>